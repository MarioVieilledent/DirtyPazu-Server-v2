(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();function h(){}function J(t){return t()}function H(){return Object.create(null)}function P(t){t.forEach(J)}function Q(t){return typeof t=="function"}function S(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function X(t){return Object.keys(t).length===0}function y(t,e){t.appendChild(e)}function O(t,e,r){t.insertBefore(e,r||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function V(t){return document.createTextNode(t)}function z(){return V(" ")}function Z(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function A(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function tt(t){return Array.from(t.childNodes)}let Y;function L(t){Y=t}const x=[],K=[];let k=[];const G=[],et=Promise.resolve();let B=!1;function nt(){B||(B=!0,et.then(W))}function M(t){k.push(t)}const F=new Set;let v=0;function W(){if(v!==0)return;const t=Y;do{try{for(;v<x.length;){const e=x[v];v++,L(e),rt(e.$$)}}catch(e){throw x.length=0,v=0,e}for(L(null),x.length=0,v=0;K.length;)K.pop()();for(let e=0;e<k.length;e+=1){const r=k[e];F.has(r)||(F.add(r),r())}k.length=0}while(x.length);for(;G.length;)G.pop()();B=!1,F.clear(),L(t)}function rt(t){if(t.fragment!==null){t.update(),P(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}function ot(t){const e=[],r=[];k.forEach(n=>t.indexOf(n)===-1?e.push(n):r.push(n)),r.forEach(n=>n()),k=e}const j=new Set;let $;function ct(){$={r:0,c:[],p:$}}function it(){$.r||P($.c),$=$.p}function g(t,e){t&&t.i&&(j.delete(t),t.i(e))}function b(t,e,r,n){if(t&&t.o){if(j.has(t))return;j.add(t),$.c.push(()=>{j.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}function D(t){t&&t.c()}function C(t,e,r,n){const{fragment:o,after_update:c}=t.$$;o&&o.m(e,r),n||M(()=>{const i=t.$$.on_mount.map(J).filter(Q);t.$$.on_destroy?t.$$.on_destroy.push(...i):P(i),t.$$.on_mount=[]}),c.forEach(M)}function N(t,e){const r=t.$$;r.fragment!==null&&(ot(r.after_update),P(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function st(t,e){t.$$.dirty[0]===-1&&(x.push(t),nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function I(t,e,r,n,o,c,i,a=[-1]){const p=Y;L(t);const s=t.$$={fragment:null,ctx:[],props:c,update:h,not_equal:o,bound:H(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(p?p.$$.context:[])),callbacks:H(),dirty:a,skip_bound:!1,root:e.target||p.$$.root};i&&i(s.root);let f=!1;if(s.ctx=r?r(t,e.props||{},(u,_,...E)=>{const d=E.length?E[0]:_;return s.ctx&&o(s.ctx[u],s.ctx[u]=d)&&(!s.skip_bound&&s.bound[u]&&s.bound[u](d),f&&st(t,u)),_}):[],s.update(),f=!0,P(s.before_update),s.fragment=n?n(s.ctx):!1,e.target){if(e.hydrate){const u=tt(e.target);s.fragment&&s.fragment.l(u),u.forEach(w)}else s.fragment&&s.fragment.c();e.intro&&g(t.$$.fragment),C(t,e.target,e.anchor,e.customElement),W()}L(p)}class T{$destroy(){N(this,1),this.$destroy=h}$on(e,r){if(!Q(r))return h;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const o=n.indexOf(r);o!==-1&&n.splice(o,1)}}$set(e){this.$$set&&!X(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ut(t){let e,r,n,o,c;return{c(){e=m("h1"),e.textContent="Dictionnaire Dibi",r=z(),n=m("button"),n.textContent="Login"},m(i,a){O(i,e,a),O(i,r,a),O(i,n,a),o||(c=Z(n,"click",t[0]),o=!0)},p:h,i:h,o:h,d(i){i&&w(e),i&&w(r),i&&w(n),o=!1,c()}}}function ft(){window.location.href="https://discord.com/api/oauth2/authorize?client_id=1115564047048392754&redirect_uri=http%3A%2F%2Flocalhost%3A5173%2Fauth&response_type=code&scope=identify"}function lt(t){return[()=>ft()]}class at extends T{constructor(e){super(),I(this,e,lt,ut,S,{})}}class dt extends T{constructor(e){super(),I(this,e,null,null,S,{})}}function ht(t){let e;return{c(){e=V("Discord")},m(r,n){O(r,e,n)},p:h,i:h,o:h,d(r){r&&w(e)}}}class pt extends T{constructor(e){super(),I(this,e,null,ht,S,{})}}function _t(t){const e="YOUR_CLIENT_ID",r="YOUR_CLIENT_SECRET",n=encodeURIComponent("http://localhost:5000/auth/callback"),o="https://discord.com/api/oauth2/token",c=new URLSearchParams;return c.append("client_id",e),c.append("client_secret",r),c.append("grant_type","authorization_code"),c.append("code",t),c.append("redirect_uri",n),fetch(o,{method:"POST",body:c}).then(i=>i.json()).then(i=>{const a=i.access_token;return i.refresh_token,a})}function mt(t){const e=new URLSearchParams(window.location.search).get("code");return e&&_t(e).then(r=>{fetch("https://discord.com/api/v13/users/@me",{headers:{Authorization:`Bearer ${r}`}}).then(n=>n.json()).then(n=>{n.username,`${n.id}${n.avatar}`}).catch(n=>{})}).catch(r=>{}),[]}class $t extends T{constructor(e){super(),I(this,e,mt,null,S,{})}}function gt(t){let e,r;return e=new pt({}),{c(){D(e.$$.fragment)},m(n,o){C(e,n,o),r=!0},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){b(e.$$.fragment,n),r=!1},d(n){N(e,n)}}}function yt(t){let e,r;return e=new $t({}),{c(){D(e.$$.fragment)},m(n,o){C(e,n,o),r=!0},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){b(e.$$.fragment,n),r=!1},d(n){N(e,n)}}}function vt(t){let e,r,n,o,c,i,a,p,s,f,u,_;n=new at({}),a=new dt({});const E=[yt,gt],d=[];function q(l,R){return l[0]==="dict"?0:l[0]==="discordAuth"?1:-1}return~(f=q(t))&&(u=d[f]=E[f](t)),{c(){e=m("div"),r=m("div"),D(n.$$.fragment),o=z(),c=m("div"),i=m("div"),D(a.$$.fragment),p=z(),s=m("div"),u&&u.c(),A(r,"class","top f svelte-1ynxgtt"),A(i,"class","left svelte-1ynxgtt"),A(s,"class","right svelte-1ynxgtt"),A(c,"class","bottom f svelte-1ynxgtt"),A(e,"class","all fc svelte-1ynxgtt")},m(l,R){O(l,e,R),y(e,r),C(n,r,null),y(e,o),y(e,c),y(c,i),C(a,i,null),y(c,p),y(c,s),~f&&d[f].m(s,null),_=!0},p(l,[R]){let U=f;f=q(l),f!==U&&(u&&(ct(),b(d[U],1,1,()=>{d[U]=null}),it()),~f?(u=d[f],u||(u=d[f]=E[f](l),u.c()),g(u,1),u.m(s,null)):u=null)},i(l){_||(g(n.$$.fragment,l),g(a.$$.fragment,l),g(u),_=!0)},o(l){b(n.$$.fragment,l),b(a.$$.fragment,l),b(u),_=!1},d(l){l&&w(e),N(n),N(a),~f&&d[f].d()}}}function xt(t,e,r){let n;return window.location.pathname==="/auth"?n="discordAuth":n="dict",[n]}class bt extends T{constructor(e){super(),I(this,e,xt,vt,S,{})}}new bt({target:document.getElementById("app")});
